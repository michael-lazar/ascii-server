{# Modified from django/contrib/admin/templates/admin/widgets/clearable_file_input.html #}

{% if widget.is_initial %}<p class="file-upload">
  {% if widget.image_preview %}
    <a href="{{ widget.value.url }}"><img alt="" src="{{ widget.value.url }}" style="max-width: 400px; max-height: 400px"></a>
    <br>
  {% endif %}
  {{ widget.initial_text }}: <a href="{{ widget.value.url }}">{{ widget.value }}</a>
  {% if not widget.required %}
    <span class="clearable-file-input">
      <input type="checkbox" name="{{ widget.checkbox_name }}" id="{{ widget.checkbox_id }}"{% if widget.attrs.disabled %} disabled{% endif %}{% if widget.attrs.checked %} checked{% endif %}>
      <label for="{{ widget.checkbox_id }}">{{ widget.clear_checkbox_label }}</label>
    </span>
  {% endif %}
  <br>
  {{ widget.input_text }}:
{% endif %}
<input type="{{ widget.type }}" name="{{ widget.name }}"{% include "django/forms/widgets/attrs.html" %}>
{% if widget.is_initial %}
  </p>
{% endif %}
